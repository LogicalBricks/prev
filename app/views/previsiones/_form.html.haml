= simple_nested_form_for(@prevision) do |f|
  = f.error_notification

  .row.form-inputs
    .col-md-4
      = f.input :fecha_inicial, as: :string
    .col-md-4
      = f.input :fecha_final, as: :string
    .col-md-4
      = f.input :monto

  %hr

  .row
    .col-md-6
      .panel.panel-default
        .panel-heading
          Socios
          .pull-right
            = f.link_to_add :topes, class: 'btn btn-xs btn-success', data: { target: '#socios-prevision' } do
              %i.fa.fa-user-plus
              Agregar socio
        %table.table
          %thead
            %tr
              %th Nombre
              %th Monto
              %th
          %tbody#socios-prevision
            = f.simple_fields_for :topes, wrapper: false, defaults: { label: false, input_html: { class: 'form-control' } } do |fs|
              %tr.fields
                %td= fs.association :socio
                %td= fs.input :monto
                %td
                  = fs.link_to_remove class: 'btn btn-sm btn-danger' do
                    %i.fa.fa-times

    .col-md-6
      .panel.panel-default
        .panel-heading
          Rubros
          .pull-right
            = f.link_to_add :apartados, class: 'btn btn-xs btn-success', data: { target: '#apartados-prevision' } do
              %i.fa.fa-archive
              Agregar apartado
        %table.table
          %thead
            %tr
              %th Nombre
              %th Monto
              %th
          %tbody#apartados-prevision
            = f.simple_fields_for :apartados, wrapper: false, defaults: { label: false, input_html: { class: 'form-control' } } do |fs|
              %tr.fields
                %td= fs.association :rubro
                %td= fs.input :monto_maximo
                %td
                  = fs.link_to_remove class: 'btn btn-sm btn-danger' do
                    %i.fa.fa-times

  .form-actions.pull-right
    = f.button :submit
    = link_to 'Cancelar', previsiones_path, class: 'btn btn-danger'
